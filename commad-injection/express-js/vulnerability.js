const express = require('express');
const { exec } = require('child_process');
const app = express();

app.use(express.urlencoded({ extended: true }));

app.get('/', function(req, res) {
    res.send(`
        <h2>Ping A Server:</h2>
        <form action="/ping" method="POST">
            <input type="text" name="ip" placeholder="Enter IP Address">
            <button type="submit">Ping</button>
        </form>
    `);
});

app.post('/ping', function(req, res) {
    const ip = req.body.ip;
    exec(`ping -c 4 ${ip}`, (error, output, err) => {
        if (error) {
            res.send(`<h3>Error: ${err}</h3>`);
        } else {
            res.send(`<h3>${output}</h3>`);
        }
    });
});

app.listen(3000, () => {
    console.log('Server is running on http://localhost:3000');
});
